<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from designreset.com/cork/ltr/demo4/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 17 Jul 2020 07:21:32 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>MARVANS ADMIN </title>
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/plugins.css" rel="stylesheet" type="text/css" />
    <!-- range date STYLES -->
    <!-- <link href="/plugins/flatpickr/flatpickr.css" rel="stylesheet" type="text/css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="/plugins/flatpickr/custom-flatpickr.css" rel="stylesheet" type="text/css">
    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM STYLES -->
    <link href="/plugins/apex/apexcharts.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/dashboard/dash_1.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS/CUSTOM STYLES --> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
    <!-- BEGIN LOADER -->
    <div id="load_screen"> <div class="loader"> <div class="loader-content">
        <div class="spinner-grow align-self-center"></div>
    </div></div></div>
    <!--  END LOADER -->
    
    <!--  BEGIN NAVBAR  -->
    <div class="header-container fixed-top">
        <header class="header navbar navbar-expand-sm">

            <ul class="navbar-item theme-brand flex-row  text-center">
                <li class="nav-item theme-logo">
                    <a href="">
                        <img src="/assets/img/MAR.png" class="navbar-logo" alt="logo">
                    </a>
                </li>
                <li class="nav-item theme-text">
                    <a href="" class="nav-link"> MARVANS </a>
                </li>
            </ul>

           

            <ul class="navbar-item flex-row ml-md-auto">

               

               

                <li class="nav-item dropdown user-profile-dropdown">
                    <a href="javascript:void(0);" class="nav-link dropdown-toggle user" id="userProfileDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <img src="/assets/img/profile-16.jpg" alt="avatar">
                    </a>
                    <div class="dropdown-menu position-absolute" aria-labelledby="userProfileDropdown">
                        <div class="">
                           
                            <div class="dropdown-item">
                                <a class="" href="/logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> Sign Out</a>
                            </div>
                        </div>
                    </div>
                </li>

            </ul>
        </header>
    </div>
    <!--  END NAVBAR  -->

    
    <!--  BEGIN NAVBAR  -->
    <div class="sub-header-container">
        <header class="header navbar navbar-expand-sm">
            <a href="javascript:void(0);" class="sidebarCollapse" data-placement="bottom"><svg
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-menu">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg></a>

            <ul class="navbar-nav flex-row">
                <li>
                    <div class="page-header">

                        <nav class="breadcrumb-one" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item active" aria-current="page"><span>My Dashboard</span>
                                </li>
                            </ol>
                        </nav>

                    </div>
                </li>
            </ul>
        </header>
    </div>
    <!--  END NAVBAR  -->

    <!--  BEGIN MAIN CONTAINER  -->
    <div class="main-container" id="container">

        <div class="overlay"></div>
        <div class="search-overlay"></div>

    <!--  BEGIN SIDEBAR  -->
    <div class="sidebar-wrapper sidebar-theme">
            
        <nav id="sidebar">
            <div class="shadow-bottom"></div>

           
            <ul class="list-unstyled menu-categories" id="accordionExample">
                <li class="menu">
                    <a href="/my-dash" aria-expanded="false" data-active="true" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-airplay"><path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon></svg>
                            <span>My Dashboard</span>
                        </div>
                    </a>
                </li>

                <li class="menu">
                    <a href="#dashboard" data-toggle="collapse" aria-expanded="false"
                        class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-cpu">
                                <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                                <rect x="9" y="9" width="6" height="6"></rect>
                                <line x1="9" y1="1" x2="9" y2="4"></line>
                                <line x1="15" y1="1" x2="15" y2="4"></line>
                                <line x1="9" y1="20" x2="9" y2="23"></line>
                                <line x1="15" y1="20" x2="15" y2="23"></line>
                                <line x1="20" y1="9" x2="23" y2="9"></line>
                                <line x1="20" y1="14" x2="23" y2="14"></line>
                                <line x1="1" y1="9" x2="4" y2="9"></line>
                                <line x1="1" y1="14" x2="4" y2="14"></line>
                            </svg>
                            <span>Products</span>
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-chevron-right">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>
                    </a>
                    <ul class="collapse submenu list-unstyled" id="dashboard" data-parent="#accordionExample">
                        <li>
                            <a href="/products/iphone"> iPhone </a>
                        </li>
                        <li>
                            <a href="/products/iwatch"> Watch </a>
                        </li>
                        <li>
                            <a href="/products/ipod"> AirPods </a>
                        </li>
                    </ul>
                </li>

                <li class="menu">
                    <a href="#app" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-layers">
                                <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                                <polyline points="2 17 12 22 22 17"></polyline>
                                <polyline points="2 12 12 17 22 12"></polyline>
                            </svg>
                            <span>Orders</span>
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-chevron-right">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>
                    </a>
                    <ul class="collapse submenu list-unstyled" id="app" data-parent="#accordionExample">
                        <li>
                            <a href="/orders/new"> New Orders </a>
                        </li>
                        <li>
                            <a href="/orders/processing"> Processing </a>
                        </li>
                        <li>
                            <a href="/orders/delivered"> Delivered </a>
                        </li>
                    </ul>
                </li>

                <li class="menu">
                    <a href="#components" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-clipboard">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                </path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                            </svg>
                            <span>Enquiry/Repair</span>
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-chevron-right">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>
                    </a>
                    <ul class="collapse submenu list-unstyled" id="components" data-parent="#accordionExample">
                        <li >
                            <a href="/query/unresolved"> Pending </a>
                        </li>
                        <li>
                            <a href="/query/resolved"> Resolved  </a>
                        </li>
                    </ul>
                </li>

                <li class="menu">
                    <a href="/pincodes" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-map">
                                <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                                <line x1="8" y1="2" x2="8" y2="18"></line>
                                <line x1="16" y1="6" x2="16" y2="22"></line>
                            </svg>
                            <span>Pin Codes</span>
                        </div>
                    </a>
                </li>
                <li class="menu">
                    <a href="/reviews" data-active="false" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Reviews</span>
                        </div>
                    </a>
                </li>
                <li class="menu">
                    <a href="/promo" data-active="false" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Promo Codes</span>
                        </div>
                    </a>
                </li>
                <li class="menu">
                    <a href="/dashboard/popup" aria-expanded="false" data-active="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Popup Image</span>
                        </div>
                    </a>
                </li>
                <li class="menu">
                    <a href="/states" data-active="false" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>State Codes</span>
                        </div>
                    </a>
                </li>

                <li class="menu">
                    <a href="/inventory/special/discount" data-active="false" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Special Product</span>
                        </div>
                    </a>
                </li>

                <li class="menu">
                    <a href="/dashboard/special/" data-active="false" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Special PDT Image</span>
                        </div>
                    </a>
                </li>
                
                <li class="menu">
                    <a href="https://invoice.marvansmobile.com" target="_blank" aria-expanded="false" data-active="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                            <span>Invoice Manager</span>
                        </div>
                    </a>
                </li>

                <li class="menu">
                    <a href="#app2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-activity"><rect x="10" y="3" width="4" height="18"></rect><rect x="18" y="8" width="4" height="13"></rect><rect x="2" y="13" width="4" height="8"></rect></svg>
                            <span>Inventory</span>
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </div>
                    </a>
                    <ul class="collapse submenu list-unstyled" id="app2" data-parent="#accordionExample">
                            <li>
                                <a href="/inventory/0">iPhone </a>
                            </li>
                            <li>
                                <a href="/inventory/1">iWatch</a>
                            </li>
                            <li>
                                <a href="/inventory/2">Airpods</a>
                            </li>
                            <li>
                                <a href="/inventory/3">Qty History</a>
                            </li>
                        
                    </ul>
                </li>
               

               




            </ul>
            
        </nav>

    </div>
    <!--  END SIDEBAR  -->
    
        <!--  BEGIN CONTENT AREA  -->
        <div id="content" class="main-content">
            <div class="layout-px-spacing">

                <div class="row ">


                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
                        <div class="widget widget-chart-one desk_flex" >
                           
                                <div class="inv-action width_80" >
                                    <div class="form-group mb-0" style="display: flex;">
                                        <input id="rangeCalendarFlatpickr" class="form-control pick-a-date flatpickr flatpickr-input active" type="text" max="" placeholder="Select Date Range..">
                                        <button id="filter-between" class="btn btn-primary">GO</button>
                                    </div>
                                    
                                </div>  
                             
                                <!-- <div class="inv-action">
                                    <div class="">
                                        <div id="select_menu" class="form-group " style="margin-bottom: 0;">
                                            <select id="filter-by-time" class="custom-select" required>
                                              <option value="all">Sort by &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </option>
                                              <option value="1">Last 24 Hours</option>
                                              <option value="7">This Week</option>
                                              <option value="30">This Month</option>
                                              <option value="365">This Year</option>
                                            </select>
                                            <div class="valid-feedback"> valid </div>
                                            <div class="invalid-feedback">
                                                Please Select the field
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                               
                            
                        </div>
 
                </div>
    
                
                </div>

                <div class="row layout-top-spacing">

                    <% if(type == 'byphone') {%>    
                    
                
                    <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">

                        
                        <div class="widget-content widget-content-area br-6">
                            <div class="table-responsive mb-4 mt-4">
                                <div class="widget-header">
                                    <div class="row">
                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                            <h4>iPHONE Sold by Quantity</h4>
                                        </div>                 
                                    </div>
                                </div>
                                <canvas id="productChart"></canvas>
                                <br>
                                <table id="zero-config1" class="table table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Product Type</th>
                                            <th>Product Name</th>
                                            <th>Product Variant</th>
                                            <th>#Order Placed</th>
                                            <th>Quantity Sold</th>
                                            <th>Total Value</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%iphone.forEach((c)=>{%>
                                            <tr>
                                                <td>iPhone</td>
                                                <td><%=c._id.name%></td>
                                                <td><%=c._id.variant%></td>
                                                <td><%=c.total%></td>
                                                <td><%=c.totalqty%></td>
                                                <td><%=c.price%></td>

                                               
                                            </tr>
                                        <%})%>
                                       
                                        
                                       
                                    </tbody>
                                    <!-- <tfoot>
                                        <tr>
                                            <th>Storage</th>
                                            <th>Color</th>
                                            <th>Price</th>
                                            <th></th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </tfoot> -->
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">

                        
                        <div class="widget-content widget-content-area br-6">
                            <div class="table-responsive mb-4 mt-4">
                                <div class="widget-header">
                                    <div class="row">
                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                            <h4>iWatch Sold by Quantity</h4>
                                        </div>                 
                                    </div>
                                </div>
                                <canvas id="productChart2"></canvas>
                                <br>
                                <table id="zero-config2" class="table table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Product Type</th>
                                            <th>Product Name</th>
                                            <th>Product Variant</th>
                                            <th>#Order Placed</th>
                                            <th>Quantity Sold</th>
                                            <th>Total Value</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%iwatch.forEach((c)=>{%>
                                            <tr>
                                                <td>iWatch</td>
                                                <td><%=c._id.name%></td>
                                                <td><%=c._id.variant%></td>
                                                <td><%=c.total%></td>
                                                <td><%=c.totalqty%></td>
                                                <td><%=c.price%></td>

                                               
                                            </tr>
                                        <%})%>
                                       
                                        
                                       
                                    </tbody>
                                    <!-- <tfoot>
                                        <tr>
                                            <th>Storage</th>
                                            <th>Color</th>
                                            <th>Price</th>
                                            <th></th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </tfoot> -->
                                </table>
                            </div>
                        </div>
                    </div>


                    <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">

                        
                        <div class="widget-content widget-content-area br-6">
                            <div class="table-responsive mb-4 mt-4">
                                <div class="widget-header">
                                    <div class="row">
                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                            <h4>Airpods Sold by Quantity</h4>
                                        </div>                 
                                    </div>
                                </div>
                                <canvas id="productChart3"></canvas>
                                <br>
                                <table id="zero-config3" class="table table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Product Type</th>
                                            <th>Product Name</th>
                                            <th>#Order Placed</th>
                                            <th>Quantity Sold</th>
                                            <th>Total Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%airpod.forEach((c)=>{%>
                                            <tr>
                                                <td>Airpods</td>
                                                <td><%=c._id.name%></td>
                                                <td><%=c.total%></td>
                                                <td><%=c.totalqty%></td>
                                                <td><%=c.price%></td>
                                               
                                            </tr>
                                        <%})%>
                                       
                                        
                                       
                                    </tbody>
                                    <!-- <tfoot>
                                        <tr>
                                            <th>Storage</th>
                                            <th>Color</th>
                                            <th>Price</th>
                                            <th></th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </tfoot> -->
                                </table>
                            </div>
                        </div>
                    </div>

                    <% } else if(type == 'bycity') {%>
                        
                        <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">

                            <div class="widget-content widget-content-area br-6" style="overflow-x: hidden;">
                                <div class="table-responsive mb-4 mt-4" style="overflow-x: hidden;">
                                    <div class="widget-header">
                                        <div class="row">
                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                <h4>Orders By City</h4>
                                            </div>                 
                                        </div>
                                    </div>
                                </div>
                                <canvas id="cityChart"></canvas>
            
                            </div>
                        </div>
                        <br>
                        <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing" style="overflow-x: hidden;">
                                    
                            <div class="widget-content widget-content-area br-6" style="overflow-x: hidden;">
                                <div class="table-responsive mb-4 mt-4" style="overflow-x: hidden;">
                                    <div class="widget-header">
                                        <div class="row">
                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                <h4>Orders Count By City</h4>
                                            </div>                 
                                        </div>
                                    </div>
                                </div>
                                <canvas id="cityCountChart"></canvas>
            
                            </div>
                        </div>
                        <br>
                            
                            <div class="widget-content widget-content-area br-6">
                                <div class="table-responsive mb-4 mt-4">
                                    <div class="widget-header">
                                        <div class="row">
                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                <h4>Orders by city</h4>
                                            </div>                 
                                        </div>
                                    </div>
                                    <table id="zero-config" class="table table-hover" style="width:100%">
                                        <thead>
                                             <tr>
                                                <th>City Name</th>
                                                <th>Total Orders</th>
                                                <th>Total Amount paid</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <%orders.forEach((c,index)=>{%>
                                                <% if (c._id) { %>
                                                 
                                                    <tr>
                                                   
                                                        <td><%= c._id %></td>
                                                        <td><%= c.total %></td>
                                                        <td><%= c.totalpaid %></td>
                                                       
                                                    </tr>
                                                <% } %> 
                                            <%})%>
                                           
                                            
                                           
                                        </tbody>
                                        <!-- <tfoot>
                                            <tr>
                                                <th>Storage</th>
                                                <th>Color</th>
                                                <th>Price</th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                            </tr>
                                        </tfoot> -->
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        
                        <% }%>
                </div>

            </div>
            <div class="footer-wrapper">
                <div class="footer-section f-section-1">
                    <p class="">Copyright Â© 2020 <a target="_blank" href="https://designreset.com/">DesignReset</a>, All rights reserved.</p>
                </div>
                <div class="footer-section f-section-2">
                    <p class="">Coded with <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></p>
                </div>
            </div>
        </div>
        <!--  END CONTENT AREA  -->

    </div>
    <!-- END MAIN CONTAINER -->

    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="/assets/js/libs/jquery-3.1.1.min.js"></script>
    <script src="/bootstrap/js/popper.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="/assets/js/app.js"></script>
    <script>
        $(document).ready(function() {
            App.init();
            $("#rangeCalendarFlatpickr").flatpickr({
                mode: "range",
                maxDate: "today",
                dateFormat: "Y-m-d"
            });
           $('#filter-between').click(function(){
                $("#filter-by-time>option:eq(0)").prop('selected',true);
               var range=$('#rangeCalendarFlatpickr').val();
               $.ajax({
                    type: "POST",
                    url: "/dashboard/analytics/<%=type%>",
                    data: { 
                        range:range
                    },
                    success: function(result) {
                        // alert(result.totalorders);
                        console.log(result)
                        if(result.error){
                            alert(result.error)
                        }else{
                            if(result.type == 'byphone'){
                                $("#zero-config1 tbody tr").remove();
                                $("#zero-config2 tbody tr").remove();
                                $("#zero-config3 tbody tr").remove();

                                var table = $("#zero-config1 tbody");
                                var table2 = $("#zero-config2 tbody");
                                var table3 = $("#zero-config3 tbody");
                                $.each(result.iphone, function(idx, elem){
                                table.append("<tr><td>iPhone</td><td>"+elem._id.name+"</td><td>"+elem._id.variant+"</td><td>"+elem.total+"</td><td>"+elem.totalqty+"</td><td>"+elem.price+"</td></tr>");
                                });
                                $.each(result.iwatch, function(idx, elem){
                                table2.append("<tr><td>iWatch</td><td>"+elem._id.name+"</td><td>"+elem._id.variant+"</td><td>"+elem.total+"</td><td>"+elem.totalqty+"</td><td>"+elem.price+"</td></tr>");
                                });
                                $.each(result.airpod, function(idx, elem){
                                table3.append("<tr><td>Airpod</td><td>"+elem._id.name+"</td><td>"+elem.total+"</td><td>"+elem.totalqty+"</td><td>"+elem.price+"</td></tr>");
                                });
                            } else if(result.type == 'bycity') {
                                $("#zero-config tbody tr").remove();

                                var table = $("#zero-config tbody");
                                $.each(result.orders, function(idx, elem){
                                    if(elem._id){
                                        table.append("<tr><td>"+elem._id+"</td><td>"+elem.total+"</td><td>"+elem.totalpaid+"</td></tr>");
                                    }
                                });
                            }
                        }
                      
                    },
                    error: function(result) {
                        alert('error');
                    }
                });
           })

           $("#filter-by-time").change(function() {
                // Pure JS
                var range=$('#rangeCalendarFlatpickr').val("");
                var selectedVal = this.value;
                console.log(selectedVal)
                $.ajax({
                    type: "POST",
                    url: "/dashboard/analytics/<%=type%>",
                    data: { 
                        till:selectedVal
                    },
                    success: function(result) {
                        // alert(result.totalorders);
                        console.log(result)
                        if(result.error){
                            alert(result.error)
                        }else{
                            console.log(result.offlineSale)
                            $('#total-orders').text(result.totalorders);
                            $('#online-orders').text(result.onlineorders);
                            $('#offline-orders').text(result.offlineorders);
                            $('#total-amount').text(result.onlineSale+result.offlineSale);
                            $('#online-amount').text(result.onlineSale);
                            $('#offline-Amount').text(result.offlineSale);
                        }
                      
                    },
                    error: function(result) {
                        alert('error');
                    }
                });
             
                

               
            });
        });
    </script>
    <script src="/assets/js/custom.js"></script>
    <script> 
            var randomColorGenerator = function () { 
                    return '#' + (Math.random().toString(16) + '0000000').slice(2, 8); 
            };
            function poolColors(a) {
                var pool = [];
                for(i = 0; i < a; i++) {
                    pool.push(randomColorGenerator());
                }
                return pool;
            }
        if(`<%=type%>` == 'byphone') {
        let productChart = document.getElementById('productChart').getContext('2d');
        let productChart2 = document.getElementById('productChart2').getContext('2d');
        let productChart3 = document.getElementById('productChart3').getContext('2d');
        

        let pdtChart = new Chart(productChart, {
            type : 'bar',
            options: {
            plugins: {
                    title: {
                        display: true,
                        text: 'Product Sales Chart',
                        fontSize: 20,}
                    }
            },
            data : {
                labels : `<%=Object.keys(oI)%>`.split(','),
                datasets : [{
                    label : 'Total Ordered',
                    data : `<%=Object.values(oI)%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oI)%>`.split(',').length),
                },
                {
                    label : 'Total Inventory',
                    data : `<%=Object.keys(oI).map(key=> {
                        let a = iphoneQty.find(at=>at._id==key)
                        if (a) return a.total
                        else return 0
                    })%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oI)%>`.split(',').length),
                }]
            }
        });

        let pdtChart2 = new Chart(productChart2, {
            type : 'bar',
            options: {
            plugins: {
                    title: {
                        display: true,
                        text: 'Product Sales Chart',
                        fontSize: 20,}
                    }
            },
            data : {
                labels : `<%=Object.keys(oW)%>`.split(','),
                datasets : [{
                    label : 'Total Ordered',
                    data : `<%=Object.values(oW)%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oW)%>`.split(',').length),
                },
                {
                    label : 'Total Inventory',
                    data : `<%=Object.keys(oW).map(key=> {
                        let a = iwatchQty.find(at=>at._id==key)
                        if (a) return a.total
                        else return 0
                    })%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oW)%>`.split(',').length),
                }]
            }
        });

        let pdtChart3 = new Chart(productChart3, {
            type : 'bar',
            options: {
            plugins: {
                    title: {
                        display: true,
                        text: 'Product Sales Chart',
                        fontSize: 20,}
                    }
            },
            data : {
                labels : `<%=Object.keys(oA)%>`.split(','),
                datasets : [{
                    label : 'Total Ordered',
                    data : `<%=Object.values(oA)%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oA)%>`.split(',').length),
                },
                {
                    label : 'Total Inventory',
                    data : `<%=Object.keys(oA).map(key=> {
                        let a = airpods.find(at=>at.name==key)
                        if (a) return a.quantity
                        else return 0
                    })%>`.split(','),
                    backgroundColor : poolColors(`<%=Object.values(oA)%>`.split(',').length),
                }]
            }
        });
    
    } else {
        let cityChart = document.getElementById('cityChart').getContext('2d');
        let cityCountChart = document.getElementById('cityCountChart').getContext('2d');

        let citychart = new Chart(cityChart, {
            type : 'bar',
            options: {
            plugins: {
                    title: {
                        display: true,
                        text: 'Order By City',
                        fontSize: 20,
                    }
                    }
            },
            data : {
                labels : `<%=oCity.map(a=> a._id)%>`.split(','),
                datasets : [{
                    label : 'Total Orders Value by City',
                    data : `<%=(oCity).map(a => a.totalpaid)%>`.split(','),
                    backgroundColor : poolColors(`<%=(oCity)%>`.split(',').length),
                }]
            }
        });
        let scityCountChart = new Chart(cityCountChart, {
            type : 'bar',
            options: {
            plugins: {
                    title: {
                        display: true,
                        text: 'Order By City',
                        fontSize: 20,
                    }
                    }
            },
            data : {
                labels : `<%=oCity.map(a=> a._id)%>`.split(','),
                datasets : [      {
                label : 'Total Count by City',
                data : `<%=(oCity).map(a => a.total)%>`.split(','),
                backgroundColor : poolColors(`<%=(oCity)%>`.split(',').length),
            }]
            }
        });
    }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- END GLOBAL MANDATORY SCRIPTS -->
    <!-- <script src="/plugins/flatpickr/flatpickr.js"></script> -->

    <script src="/plugins/flatpickr/custom-flatpickr1.js"></script>

    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
    

</body>

<!-- Mirrored from designreset.com/cork/ltr/demo4/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 17 Jul 2020 07:22:29 GMT -->
</html>